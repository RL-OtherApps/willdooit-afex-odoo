<h1 id="global-vendor-payments-for-businesses">Global Vendor Payments for Businesses</h1>
<p>This module allows vendor banks to be synchronised with AFEX to create AFEX Beneficiaries. It also allows payments within Odoo to book payments to vendors through AFEX.</p>
<p>You must have an AFEX account, and request/receive an API Key from AFEX before this module can be used. AFEX's terms and conditions apply.</p>
<p>AFEX homepage: <a href="https://www.afex.com/">https://www.afex.com/</a></p>
<h2 id="setup">Setup</h2>
<ul>
<li><p><em>Settings &gt; Users &amp; Companies &gt; Companies &gt; General Information Tab</em>
<blockquote>
<p>For each Odoo defined company which will trade with AFEX:</p>
<blockquote>
<ul>
<li><strong>AFEX API Key</strong> - Supplied by AFEX and entered here.</li>
</ul>
</blockquote>
</blockquote></li>
<li><p><em>Accounting &gt; Configuration &gt; Journals</em></p>
<blockquote>
<p>A new Cash Journal can be created which will be used for AFEX payments. A single journal will suffice if settlement will always be in the local currency. If settlement will be made in other currencies, then a journal will be required per currency. The settlement currency is the currency used to pay AFEX, not the currency used to pay the vendor.</p>
<ul>
<li><strong>Journal Entries</strong>
<ul>
<li><strong>Default Debit / Credit Account</strong> - G/L account for AFEX clearing. Should be set up as a non reconcilable liability account which is reviewed periodically. It could also be a revenue or expense account. The balance which accumulates in here will be the difference between the Odoo anticipated settlement from stored currency rates, and the actual settlement value to AFEX. It may be treated as a straight expense, or it may be allocated to other areas of the accounts.</li>
<li><strong>Currency</strong> - Leave blank for settlement in the company currency, or enter a currency if settling in another in-between currency. The payment will use the currency from here when posting to the clearing account defined above.</li>
<li><strong>AFEX Journal</strong> - Enabled.</li>
<li><strong>AFEX Invoicing Partner</strong> - This is the partner to which the liability will be posted when making an AFEX trade.</li>
<li><strong>AFEX Fees Account</strong> - Select an account for expensing AFEX fees.</li>
</ul></li>
<li><strong>Advanced Settings</strong>
<ul>
<li><strong>Debit Methods</strong> - None should be selected.</li>
<li><strong>Payment Methods</strong> - Enable manual.</li>
</ul></li>
</ul>
</blockquote></li>
<li><p><em>Partner &gt; Sales and Purchases Tab &gt; Bank Account(s)</em></p>
<blockquote>
<p>Vendors have an option available against their bank accounts to allow them to be marked as bank accounts to be associated with AFEX. There should only be one for any currency for a given vendor.</p>
<ul>
<li><strong>AFEX Beneficiary</strong></li>
<li><strong>Currency</strong></li>
</ul>
<p>Other values will depend on the beneficiary. Generally, attempting to sync beneficiaries with incomplete information will tell you of missing required data, but it varies due to many factors.</p>
<ul>
<li><strong>AFEX Corporate</strong> - If the beneficiary is not an individual.</li>
<li><strong>AFEX Bank Country</strong></li>
<li><strong>AFEX Intermediary Bank Country</strong></li>
<li><strong>AFEX Sync Information</strong> - Various values.</li>
</ul>
<p>Other required values are picked up from the partner address area.</p>
</blockquote></li>
<li><p><em>Partner</em></p>
<blockquote>
<p>Partners have an <strong>AFEX Sync</strong> option available in their <strong>Action Drop Down</strong> to allow the Partner and their Bank Accounts to be synced to AFEX, which will create <strong>AFEX Beneficiaries</strong>.</p>
<ul>
<li><strong>Action</strong>
<ul>
<li><strong>AFEX Sync</strong></li>
</ul></li>
</ul>
<p>The <strong>AFEX Beneficiary</strong> should be confirmed <strong>by AFEX</strong> before any payments are made.</p>
<p>A general indication of the status is shown on the <em>Sales and Purchases</em> Tab.</p>
<ul>
<li><strong>AFEX Status</strong> - Either <em>Sync Needed</em> or <em>Synchronised</em>.</li>
</ul>
</blockquote></li>
<li><p><em>Settings &gt; Technical &gt; System Parameters</em></p>
<blockquote>
<p>The URL defaults to the live URL (https://api.afex.com:7890/api/).  If need be, it can be changed in the System Parameters.</p>
<ul>
<li><strong>Key</strong> - afex.url</li>
<li><strong>Value</strong> - the URL <em>(e.g. <a href="https://demo.api.afex.com:7890/api/">https://demo.api.afex.com:7890/api/</a>)</em></li>
</ul>
</blockquote></li>
</ul>
<h2 id="usage">Usage</h2>
<ul>
<li><dl>
<dt><em>Accounting &gt; Purchases &gt; Vendor Bills &gt; [Open Bill] &gt; Register Payment</em> or <em>*Accounting &gt; Purchases &gt; Vendor Bills &gt; [Select Multiple] &gt; [Action Drop Down and Register Payment]</em></dt>
<p>To make a foreign currency payment using an <strong>AFEX Journal</strong> for a vendor who has an associated <strong>confirmed AFEX Beneficiary</strong>. Choose the correct payment journal, which will determine the settlement currency. The payment amount and currency can be chosen. If part or overpaying a single bill, an option will be given to choose if the balance is to be kept open or if it is to be written off.</p>
<p>Retrieving a quote, the system will retrieve the exchange rate from AFEX and display the <strong>payment amount</strong> conversion using the exchange rate. Quote information is displayed on the payment screen.</p>
<p>If applicable, the AFEX fee amount(s) and currency will be displayed as well.</p>
<p>Each <strong>Payment Quote</strong> is valid for 30 seconds.</p>
<p>The <strong>Re-Quote</strong> button on the payment screen can be used to refresh the quote.</p>
<p>When the payment is <strong>Validated</strong>, the system will send information to AFEX to book and schedule a payment to the vendor.</p>
<p>The vendor will be marked as paid to the level selected, and a bill will be raised to the AFEX partner. Any fee(s) in the same currency as the settlement currency will be included in the same bill. Otherwise, separate bill(s) will be raised for the fee(s).</p>
<p>Information about the booked payment will be displayed on the AFEX bill, and on the Odoo payment record.</p>
<p>To ensure the foreign currency payment can be sent to the vendor on the scheduled date, you must remit settlement funding for the payment to AFEX within 24 hours of booking the payment.</p>
<p>Upon AFEX receiving payment, the booked payment to the vendor will be confirmed for the scheduled time.</p>
</dd>
</dl></li>
</ul>